{% extends "bootstrap.html" %}
{% load markdown_deux_tags %}

{% block title %}Indiepen{% endblock %}

{% block showcase %}
  <div class="panel">
    <div class="panel-body">
  	<!--<img class="img-circle" src='http://lorempixel.com/600/600'></img>-->
    <h1>{{ project.title }}</h1>
    <p class="big-first-letter">{{ project.brief }}</p>

    <div class="progress progress-sm">
        <div class="progress-bar label-default" style="width: {{ project.get_percent_upfront }}%">
        </div>
        {% for ask in project.get_asks_per_post %}
          <div class="progress-bar {% if forloop.counter|divisibleby:2 %}progress-bar-primary{% else %}progress-bar-success{% endif %} " style="width: {{ project.get_percent_per_post }}%">
          </div>
        {% endfor %}
    </div>

    <div class="progress progress-sm">
        <div class="progress-bar label-warning" style="width: {{ project.get_percent_pledged }}%">
        </div>
    </div>
      <p>
      <span class="label label-default">${{ project.upfront }} Up Front</span>
      <span class="label label-primary">{{ project.get_number_of_posts }} Posts at ${{ project.get_ask_per_post }} Per Post</span>
      <span class="label label-success">${{ project.ask }} Total</span>
      <span class="label label-warning">${{ project.get_total_pledged }} Pledged So Far</span>
      </p>
      <p>Members: {% for m in project.get_members %} {{ m.email }} {% endfor%} </p>
	</div>
	<ul class="list-group">
	  <li class="list-group-item">Duration: {{ project.duration }}</li>
	  <li class="list-group-item">Frequency: {{ frequency }}</li>
	  <li class="list-group-item">Medium: {{ project.medium }}</li>
	</ul>
</div>
</div>

<div class="js-masonry" data-masonry-options='{ "itemSelector": ".item" }'>

  {% for post in project.get_posts %}

    <div class="col-md-3 item well">
      {% if not post.published %}<p><span class="label label-danger">Not Yet Published</span></p>{% endif %}
      {% for media in post.get_summary_medias %}
        {% if media.medium == "IMA" %}
          <a href="{{ post.get_absolute_url }}"><img class="img-thumbnail" src='{{ media.get_file_url }}'></img></a>
          <p><a href="{{ post.get_absolute_url }}" >{{ media.get_file_name }}</a> | {{ media.brief }}</p>
        {% endif %}

      {% if media.medium == "TXT" %}
        <h2><a href="{{ post.get_absolute_url }}">{{ mmediaget_file_name }}</a></h2>
        <span>{{ media.get_content |truncatechars:500 |markdown}}<a href="{{ post.get_absolute_url }}">continued on page {{ post.id }}</a></span>
        <div class="panel">
          <div class="row">
            <p>{{ media.brief }}</p>
          </div>
        </div>
      {% endif %}

      {% if media.medium == "DAT" %}
        <div class="panel terques-chart">
            <div class="panel-body chart-texture">
                <div class="chart">
                    <div class="heading">
                        <span>{{ mmediaget_file_name }}</span>
                        <strong></strong>
                    </div>
                    <div class="sparkline" data-type="line" data-resize="true" data-height="75" data-width="90%" data-line-width="1" data-line-color="#fff" data-spot-color="#fff" data-fill-color="" data-highlight-line-color="#fff" data-spot-radius="4" data-data="[{% for value in media.get_content_data_values %}{{ value }}{% if forloop.last %}{% else %},{% endif %}{% endfor %}]"><canvas style="display: inline-block; width: 363px; height: 75px; vertical-align: top;" width="363" height="75"></canvas></div>
                </div>
            </div>
            <div class="chart-tittle">
                <span class="title">Title goes here</span>
                <span class="value">
                    <a href="{{ post.get_absolute_url }}">{{ media.get_file_name }}</a>
                </span>
            </div>
        </div>
      {% endif %}
    {%endfor %}
    <hr></hr>
    </div>

  {% endfor %}
</div>
                

{% endblock %}

{% block audit %}

{% endblock %}